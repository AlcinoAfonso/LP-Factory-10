{
"meta": {
"datetime": "04/01/2026 11:00",
"origin": "ajuste pontual",
"scope": "documentacao",
"execution_mode": "github_actions",
"target_doc": "docs/base-tecnica.md",
"warnings": [
"meta.datetime preenchido sem minuto confirmado pelo usuário; ajuste se necessário."
]
},
"ops": [
{
"id": "A1",
"doc_path": "docs/base-tecnica.md",
"op": "replace_section",
"target": "3.4",
"mode": "shallow",
"content": "3.4 CI/Lint (Bloqueios)\n• Validação por PR + preview de deploy (Vercel)\n• PATH: .github/workflows/security.yml\n• Bloqueio de segurança: impedir padrões de implicit flow em cl...UI (access_token, refresh_token, setSession, getSessionFromUrl)\n• Regra: verifyOtp() só pode existir em app/auth/confirm/**\n• Regra de merge (mínimo): validação automática ok + preview ok ...moke de acesso (login/logout/reset de senha/navegação pós-login)\n• Regra: antes de merge, seguir obrigatoriamente o checklist da seção 7 (anti-regressão)\n"
},
{
"id": "A2",
"doc_path": "docs/base-tecnica.md",
"op": "replace_section",
"target": "3.4.1",
"content": "3.4.1 Manutenção (Upgrade Next.js + lockfile)\n• PATH: .github/workflows/upgrade-next-16-1-1.yml\n• Disparo: manual (inputs: target_branch, next_version)\n• Objetivo: atualizar Next.js + eslint-config-next para a versão informada e manter lockfile canônico versionado (npm)\n• Regra: lockfile canônico é package-lock.json (deve ficar commitado e alinhado ao package.json)\n• Setup: Node.js 22.x\n• Regra: se existir package-lock.json, usar instalação reprodutível; se não existir, gerar e commitar package-lock.json\n• Lint: non-blocking em manutenção (não deve impedir o bump/lockfile)\n• Build: blocking (não publicar se build falhar)\n• Regra: commitar alterações somente quando houver mudanças detectadas\n"
}
],
"rules": {
"fail_if_anchor_missing": true,
"fail_if_target_missing": true,
"fail_if_section_already_exists_on_insert": true,
"fail_if_ambiguous_match": true,
"no_renumber": true,
"no_reformat": true,
"no_out_of_scope_changes": true
}
}
